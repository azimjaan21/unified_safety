# YOLOv11m shared backbone + dual detect heads
# This uses a custom DualDetect module that wraps two Detect heads.

nc: [3, 2]                # [PPE_nc, FIRE_nc]
names:
  - [helmet, vest, head]  # Head-A (ppe)
  - [fire, smoke]         # Head-B (fire)

depth_multiple: 0.67
width_multiple: 0.75
max_channels: 768

backbone:
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]]
  - [-1, 1, Conv, [128, 3, 2]]
  - [-1, 3, C2f, [128, True]]
  - [-1, 1, Conv, [256, 3, 2]]
  - [-1, 6, C2f, [256, True]]
  - [-1, 1, Conv, [512, 3, 2]]
  - [-1, 6, C2f, [512, True]]
  - [-1, 1, SPPF, [512, 5]]

neck:
  - [-1, 1, Conv, [256, 1, 1]]
  - [[-1, 6], 1, Concat, [1]]
  - [-1, 3, C2f, [256]]
  - [-1, 1, Conv, [128, 1, 1]]
  - [[-1, 4], 1, Concat, [1]]
  - [-1, 3, C2f, [128]]

  # Down path (PAN)
  - [-1, 1, Conv, [256, 3, 2]]
  - [[-1, 9], 1, Concat, [1]]
  - [-1, 3, C2f, [256]]
  - [-1, 1, Conv, [512, 3, 2]]
  - [[-1, 7], 1, Concat, [1]]
  - [-1, 3, C2f, [512]]

head:
  # P3, P4, P5 heads (three detection strides)
  - [[12, 15, 18], 1, DualDetect, [[3], [2]]]  # [[ppe_nc], [fire_nc]]
